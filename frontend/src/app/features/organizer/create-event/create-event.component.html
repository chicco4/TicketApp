<div class="create-event-container">
  <h1>Create New Event</h1>

  <form [formGroup]="eventForm" (ngSubmit)="onSubmit()" class="event-form">
    <div *ngIf="error" class="error-message">
      {{ error }}
    </div>

    <div class="form-section">
      <h2>Event Details</h2>

      <div class="form-group">
        <label for="name">Event Name *</label>
        <input 
          id="name" 
          type="text" 
          formControlName="name" 
          placeholder="Enter event name"
        />
        <div class="error" *ngIf="eventForm.get('name')?.touched && eventForm.get('name')?.invalid">
          Event name is required (minimum 3 characters)
        </div>
      </div>

      <div class="form-group">
        <label for="description">Description *</label>
        <textarea 
          id="description" 
          formControlName="description" 
          rows="4"
          placeholder="Describe your event"
        ></textarea>
        <div class="error" *ngIf="eventForm.get('description')?.touched && eventForm.get('description')?.invalid">
          Description is required (minimum 10 characters)
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="location">Location *</label>
          <input 
            id="location" 
            type="text" 
            formControlName="location" 
            placeholder="Event location"
          />
          <div class="error" *ngIf="eventForm.get('location')?.touched && eventForm.get('location')?.invalid">
            Location is required
          </div>
        </div>

        <div class="form-group">
          <label for="eventDate">Event Date *</label>
          <input 
            id="eventDate" 
            type="datetime-local" 
            formControlName="eventDate"
          />
          <div class="error" *ngIf="eventForm.get('eventDate')?.touched && eventForm.get('eventDate')?.invalid">
            Event date is required
          </div>
        </div>

        <div class="form-group">
          <label for="totalSeats">Total Seats *</label>
          <input 
            id="totalSeats" 
            type="number" 
            formControlName="totalSeats" 
            min="1"
          />
          <div class="error" *ngIf="eventForm.get('totalSeats')?.touched && eventForm.get('totalSeats')?.invalid">
            Total seats must be at least 1
          </div>
        </div>
      </div>
    </div>

    <div class="form-section">
      <div class="section-header">
        <h2>Ticket Types</h2>
        <button type="button" (click)="addTicketType()" class="btn-add">+ Add Ticket Type</button>
      </div>

      <div formArrayName="ticketTypes" class="ticket-types">
        <div *ngFor="let ticketType of ticketTypes.controls; let i = index" [formGroupName]="i" class="ticket-type-group">
          <div class="ticket-type-header">
            <h3>Ticket Type {{ i + 1 }}</h3>
            <button 
              type="button" 
              (click)="removeTicketType(i)" 
              class="btn-remove"
              [disabled]="ticketTypes.length === 1"
            >
              Remove
            </button>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label [for]="'ticketName' + i">Name *</label>
              <input 
                [id]="'ticketName' + i" 
                type="text" 
                formControlName="name" 
                placeholder="e.g., General Admission"
              />
            </div>

            <div class="form-group">
              <label [for]="'ticketPrice' + i">Price *</label>
              <input 
                [id]="'ticketPrice' + i" 
                type="number" 
                formControlName="price" 
                min="0"
                step="0.01"
              />
            </div>

            <div class="form-group">
              <label [for]="'ticketQuantity' + i">Quantity *</label>
              <input 
                [id]="'ticketQuantity' + i" 
                type="number" 
                formControlName="quantity" 
                min="1"
              />
            </div>
          </div>

          <div class="form-group">
            <label [for]="'ticketDescription' + i">Description</label>
            <textarea 
              [id]="'ticketDescription' + i" 
              formControlName="description" 
              rows="2"
              placeholder="Optional description for this ticket type"
            ></textarea>
          </div>
        </div>
      </div>
    </div>

    <div class="form-actions">
      <button type="submit" [disabled]="isSubmitting" class="btn-submit">
        {{ isSubmitting ? 'Creating...' : 'Create Event' }}
      </button>
      <a routerLink="/organizer/events" class="btn-cancel">Cancel</a>
    </div>
  </form>
</div>
