<section class="attendee-home">
  <div class="attendee-guide">
    <mat-card appearance="outlined" class="guide-card">
      <mat-card-header>
        <div mat-card-avatar class="guide-avatar">
          <mat-icon>explore</mat-icon>
        </div>
        <mat-card-title>Attendee Quick Guide</mat-card-title>
        <mat-card-subtitle>Get the most from published events in three steps.</mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <mat-list class="dense-list">
          <mat-list-item>
            <mat-icon matListItemIcon>search</mat-icon>
            <div matListItemTitle>Browse events by theme and venue to find the right fit.</div>
          </mat-list-item>
          <mat-list-item>
            <mat-icon matListItemIcon>event_available</mat-icon>
            <div matListItemTitle>Open the event details to review schedules, pricing, and perks.</div>
          </mat-list-item>
          <mat-list-item>
            <mat-icon matListItemIcon>confirmation_number</mat-icon>
            <div matListItemTitle>Secure your ticket and store the QR code for smooth entry.</div>
          </mat-list-item>
        </mat-list>
      </mat-card-content>
    </mat-card>
  </div>

  <h2>Published events</h2>

  @if (loading) {
    <div class="loading">
      <mat-spinner diameter="40"></mat-spinner>
      <span>Loading events…</span>
    </div>
  } @else if (error) {
    <div class="error">{{ error }}</div>
  } @else if (events.length === 0) {
    <div class="empty">No events available.</div>
  } @else {
    <div class="card-grid">
      @for (event of events; track event.id) {
        <mat-card class="event-card" appearance="outlined">
          <div class="event-image" [style.background-image]="'url(' + getEventImage(event.type) + ')' "></div>
          <mat-card-header>
            <mat-card-title>{{ event.name }}</mat-card-title>
            <mat-card-subtitle>{{ event.type }} • {{ event.venue }}</mat-card-subtitle>
          </mat-card-header>
          <mat-card-content>
            <div class="time">
              <span class="label">Starts:</span>
              <span>{{ event.start | date: 'medium' }}</span>
            </div>
            <div class="time">
              <span class="label">Ends:</span>
              <span>{{ event.end | date: 'medium' }}</span>
            </div>
          </mat-card-content>
          <mat-card-actions align="end">
            <button mat-button color="primary" (click)="viewDetails(event)">View details</button>
          </mat-card-actions>
        </mat-card>
      }
    </div>
  }

  @if (page; as pageData) {
    @if (pageData.totalPages > 1) {
      <mat-paginator
        [length]="pageData.totalElements"
        [pageSize]="pageData.size"
        [pageIndex]="pageData.number"
        [pageSizeOptions]="[10]"
        (page)="onPageChange($event)"
        aria-label="Event pagination">
      </mat-paginator>
    }
  }
</section>
